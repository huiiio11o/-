<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KOL Collection App</title>
    
    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        coffee: {
                            50: '#F9F5F0',
                            100: '#EBE0D0',
                            200: '#D7CCC8',
                            300: '#A1887F',
                            400: '#8D6E63',
                            500: '#795548',
                            600: '#5D4037',
                            700: '#4E342E',
                            800: '#3E2723', // 深咖啡背景
                            900: '#281815', // 更深
                            accent: '#C67C4E', // 亮橘色按鈕 (接近截圖)
                            input: '#2A2522'   // 輸入框背景
                        }
                    },
                    fontFamily: {
                        script: ['"Dancing Script"', 'cursive'],
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    },
                    boxShadow: {
                        'glow': '0 0 15px rgba(198, 124, 78, 0.5)',
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                    }
                }
            }
        }
    </script>

    <style>
        /* 隱藏捲軸 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            -webkit-tap-highlight-color: transparent;
            background-color: #1a1614; /* 預設深色背景 */
        }

        /* 玻璃擬態效果 */
        .glass-nav {
            background: rgba(40, 24, 21, 0.65);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Modal 特殊樣式 */
        .modal-bg {
            background-color: #3E2723; /* fallback */
            background: linear-gradient(145deg, #3E2723 0%, #281815 100%);
        }
        
        .custom-input {
            background-color: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            color: #EBE0D0;
            transition: all 0.3s;
        }
        .custom-input:focus {
            border-color: #C67C4E;
            background-color: rgba(0,0,0,0.4);
            outline: none;
        }

        /* 動畫 */
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
    </style>
</head>
<body class="bg-coffee-50 text-coffee-900 dark:bg-[#1a1614] dark:text-coffee-100 transition-colors duration-300">

<div id="app" class="max-w-md mx-auto min-h-screen relative shadow-2xl overflow-hidden flex flex-col transition-colors duration-300 bg-white dark:bg-[#1a1614]">

    <!-- 頂部 Header (玻璃擬態) -->
    <header class="px-6 py-4 flex justify-between items-center sticky top-0 z-30 glass-nav">
        <h1 class="font-script text-3xl text-coffee-600 dark:text-coffee-100 relative w-full text-center">
            K O L
            <span class="absolute right-0 top-1 text-sm font-sans font-normal opacity-50 tracking-normal">Collection</span>
        </h1>
        <button @click="toggleDarkMode" class="absolute right-4 top-5 text-coffee-600 dark:text-coffee-200 focus:outline-none">
            <i :class="isDark ? 'fa-solid fa-sun' : 'fa-solid fa-moon'"></i>
        </button>
    </header>

    <!-- 導航 Tabs (玻璃擬態 + 發光特效) -->
    <div class="flex sticky top-[68px] z-20 px-4 pt-2 pb-2 gap-4 bg-transparent backdrop-blur-sm">
        <button @click="currentView = 'list'" 
            :class="currentView === 'list' ? 'text-coffee-accent border-coffee-accent shadow-glow' : 'text-coffee-400 border-transparent opacity-60'"
            class="flex-1 py-2 text-center rounded-xl border border-white/5 bg-white/5 dark:bg-black/20 backdrop-blur-md transition-all duration-300 font-bold text-sm tracking-wide">
            我的名單
        </button>
        <button @click="currentView = 'search'" 
            :class="currentView === 'search' ? 'text-coffee-accent border-coffee-accent shadow-glow' : 'text-coffee-400 border-transparent opacity-60'"
            class="flex-1 py-2 text-center rounded-xl border border-white/5 bg-white/5 dark:bg-black/20 backdrop-blur-md transition-all duration-300 font-bold text-sm tracking-wide">
            自動協尋
        </button>
    </div>

    <!-- VIEW 1: KOL LIST -->
    <main v-if="currentView === 'list'" class="flex-1 overflow-y-auto no-scrollbar p-4 space-y-4 pb-28">
        
        <!-- 可收合篩選欄位 -->
        <div class="bg-coffee-100 dark:bg-[#2A2522] rounded-2xl p-3 transition-all duration-300">
            <div @click="isFilterExpanded = !isFilterExpanded" class="flex justify-between items-center cursor-pointer px-1">
                <span class="text-xs font-bold text-coffee-500 dark:text-coffee-300"><i class="fa-solid fa-filter mr-1"></i> 分類篩選</span>
                <i :class="isFilterExpanded ? 'rotate-180' : ''" class="fa-solid fa-chevron-down text-xs text-coffee-400 transition-transform"></i>
            </div>
            
            <div v-show="isFilterExpanded" class="mt-3 flex flex-wrap gap-2 transition-all">
                <button @click="toggleFilter('全部')" 
                    :class="activeFilters.length === 0 ? 'bg-coffee-accent text-white shadow-glow' : 'bg-white dark:bg-[#3E2723] text-coffee-600 dark:text-coffee-300'"
                    class="px-3 py-1.5 rounded-lg text-xs font-medium transition-all">
                    全部
                </button>
                <button v-for="tag in allTags" :key="tag" @click="toggleFilter(tag)"
                    :class="activeFilters.includes(tag) ? 'bg-coffee-accent text-white shadow-glow' : 'bg-white dark:bg-[#3E2723] text-coffee-600 dark:text-coffee-300'"
                    class="px-3 py-1.5 rounded-lg text-xs font-medium transition-all border border-transparent hover:border-coffee-400">
                    {{ tag }}
                </button>
            </div>
        </div>

        <!-- KOL Cards -->
        <div v-for="kol in filteredKols" :key="kol.id" class="glass-card rounded-2xl p-4 relative group bg-white dark:bg-[#231e1c] shadow-lg border-l-4 border-coffee-accent">
            <div class="flex justify-between items-start">
                <div class="flex items-center gap-3">
                    <!-- Avatar -->
                    <div class="w-14 h-14 rounded-full bg-coffee-200 dark:bg-coffee-600 flex items-center justify-center text-xl font-bold text-coffee-700 dark:text-coffee-200 overflow-hidden border-2 border-coffee-100 dark:border-coffee-700">
                        <img v-if="kol.avatar" :src="kol.avatar" class="w-full h-full object-cover">
                        <span v-else>{{ kol.name.charAt(0) }}</span>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg text-coffee-800 dark:text-coffee-50">{{ kol.name }}</h3>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-[10px] px-2 py-0.5 rounded-full bg-coffee-100 dark:bg-coffee-700 text-coffee-600 dark:text-coffee-300 border border-coffee-200 dark:border-coffee-600">
                                {{ kol.tier }}
                            </span>
                        </div>
                    </div>
                </div>
                <!-- Actions -->
                <button @click="editKol(kol)" class="w-8 h-8 rounded-full bg-coffee-50 dark:bg-coffee-800 flex items-center justify-center text-coffee-400 hover:text-coffee-accent transition-colors">
                    <i class="fa-solid fa-ellipsis-vertical"></i>
                </button>
            </div>

            <!-- Tags -->
            <div class="mt-3 flex flex-wrap gap-1.5 pl-[68px]">
                <span v-for="tag in kol.tags" :key="tag" class="text-[10px] text-coffee-500 dark:text-coffee-400">#{{tag}}</span>
            </div>

            <!-- Platforms Links -->
            <div class="mt-4 flex gap-4 pl-2">
                <a v-for="plat in kol.platforms" :key="plat.name" :href="plat.url" target="_blank" 
                   class="flex flex-col items-center gap-1 group/icon hover:-translate-y-1 transition-transform">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center bg-coffee-50 dark:bg-[#2A2522] shadow-sm">
                        <i :class="[getPlatformIcon(plat.name), getPlatformColor(plat.name)]" class="text-sm"></i>
                    </div>
                </a>
            </div>
            
            <!-- Delete Button (Hidden by default, shown on card hover area roughly) -->
            <button @click.stop="deleteKol(kol.id)" class="absolute top-4 right-14 text-red-300 hover:text-red-500 opacity-50 hover:opacity-100">
                <i class="fa-solid fa-trash text-xs"></i>
            </button>
        </div>

        <div v-if="filteredKols.length === 0" class="flex flex-col items-center justify-center py-20 opacity-40">
            <i class="fa-solid fa-mug-hot text-5xl mb-4 text-coffee-300"></i>
            <p class="text-coffee-400">尚無資料，請新增網紅</p>
        </div>
    </main>

    <!-- VIEW 2: SEARCH (Simulation) -->
    <main v-if="currentView === 'search'" class="flex-1 overflow-y-auto no-scrollbar p-4 space-y-4 pb-28">
        <div class="bg-[#2A2522] p-4 rounded-2xl shadow-inner border border-white/5">
            <label class="text-xs font-bold text-coffee-400 mb-2 block">我想找...</label>
            <div class="relative">
                <input v-model="searchQuery" type="text" placeholder="輸入關鍵字 (例: 美食, 穿搭)..." 
                    class="w-full pl-10 pr-4 py-3 rounded-xl bg-black/30 text-white border border-white/10 focus:border-coffee-accent outline-none">
                <i class="fa-solid fa-magnifying-glass absolute left-4 top-3.5 text-coffee-500"></i>
            </div>
            <div class="flex gap-2 mt-4 overflow-x-auto no-scrollbar">
                <button v-for="p in platformOptions" :key="p" @click="searchPlatform = p"
                    :class="searchPlatform === p ? 'bg-coffee-accent text-white' : 'bg-white/5 text-coffee-300'"
                    class="px-3 py-1.5 rounded-lg text-xs whitespace-nowrap transition-colors border border-white/5">
                    <i :class="getPlatformIcon(p)"></i> {{ p }}
                </button>
            </div>
            <button @click="performSearch" class="w-full mt-4 bg-gradient-to-r from-coffee-600 to-coffee-500 hover:from-coffee-500 hover:to-coffee-accent text-white py-3 rounded-xl font-bold shadow-lg active:scale-95 transition-all">
                <i class="fa-solid fa-wand-magic-sparkles mr-1"></i> 開始 AI 協尋
            </button>
        </div>

        <!-- Results -->
        <div v-if="searchResults.length > 0" class="grid grid-cols-2 gap-3">
            <div v-for="res in searchResults" :key="res.id" class="bg-[#231e1c] p-3 rounded-xl border border-white/5 shadow-lg flex flex-col items-center text-center">
                <div class="w-16 h-16 rounded-full bg-gray-700 mb-2 overflow-hidden border-2 border-coffee-800">
                    <img :src="res.avatar" class="w-full h-full object-cover">
                </div>
                <div class="font-bold text-sm text-coffee-100 truncate w-full">{{ res.name }}</div>
                <a :href="res.url" target="_blank" class="mt-2 text-xs text-coffee-accent border border-coffee-accent/30 px-3 py-1 rounded-full hover:bg-coffee-accent hover:text-white transition-colors">
                    查看帳號
                </a>
            </div>
        </div>
    </main>

    <!-- FAB: Add Button -->
    <button v-if="currentView === 'list'" @click="openModal()" class="absolute bottom-8 right-6 w-14 h-14 bg-coffee-accent text-white rounded-full shadow-glow flex items-center justify-center text-2xl hover:scale-110 transition-transform z-20">
        <i class="fa-solid fa-plus"></i>
    </button>

    <!-- MODAL: Custom Design (依據截圖復刻) -->
    <div v-if="showModal" class="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/70 backdrop-blur-sm p-0 sm:p-4">
        
        <!-- Modal Card -->
        <div class="bg-[#3E2723] w-full max-w-md rounded-t-3xl sm:rounded-2xl p-6 shadow-2xl transform transition-all animate-slide-up border border-white/10 text-[#EBE0D0]">
            
            <!-- Modal Header -->
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold tracking-wide">{{ isEditing ? '編輯網紅' : '新增網紅' }}</h2>
                <button @click="showModal = false" class="text-coffee-300 hover:text-white transition-colors">
                    <i class="fa-solid fa-xmark text-xl"></i>
                </button>
            </div>

            <!-- Scrollable Content -->
            <div class="space-y-5 max-h-[70vh] overflow-y-auto no-scrollbar pb-2">
                
                <!-- Main Link & Auto Fill -->
                <div>
                    <label class="block text-xs font-bold text-coffee-300 mb-1.5">主平台連結 (URL)</label>
                    <div class="flex gap-2">
                        <div class="relative flex-1">
                            <span class="absolute left-3 top-3 text-coffee-500"><i class="fa-solid fa-link"></i></span>
                            <input v-model="form.mainLink" type="text" placeholder="https://..." 
                                class="w-full pl-9 pr-3 py-2.5 rounded-lg custom-input text-sm">
                        </div>
                        <button @click="autoFillInfo" class="bg-white/10 hover:bg-white/20 text-coffee-100 px-4 py-2 rounded-lg text-xs flex items-center gap-1 border border-white/10 transition-colors whitespace-nowrap">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> 自動帶入
                        </button>
                    </div>
                </div>

                <!-- Grid: Name & Platform -->
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs font-bold text-coffee-300 mb-1.5">名稱</label>
                        <input v-model="form.name" type="text" class="w-full px-3 py-2.5 rounded-lg custom-input text-sm">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-coffee-300 mb-1.5">主平台</label>
                        <input v-model="form.mainPlatform" readonly type="text" class="w-full px-3 py-2.5 rounded-lg bg-black/20 border border-white/5 text-coffee-400 text-sm cursor-not-allowed">
                    </div>
                </div>

                <!-- Tier -->
                <div>
                    <label class="block text-xs font-bold text-coffee-300 mb-1.5">網紅等級</label>
                    <select v-model="form.tier" class="w-full px-3 py-2.5 rounded-lg custom-input text-sm appearance-none">
                        <option class="text-black" value="初級 (1k-3k)">初級 (1k-3k)</option>
                        <option class="text-black" value="中級 (3k-10k)">中級 (3k-10k)</option>
                        <option class="text-black" value="高級 (10k-50k)">高級 (10k-50k)</option>
                        <option class="text-black" value="鑽石級 (50k+)">鑽石級 (50k+)</option>
                    </select>
                </div>

                <!-- Tags -->
                <div>
                    <label class="block text-xs font-bold text-coffee-300 mb-2">分類標籤 (可複選)</label>
                    <div class="flex flex-wrap gap-2">
                        <!-- Existing Tags -->
                        <button v-for="tag in allTags" :key="tag" @click="toggleFormTag(tag)"
                            :class="form.tags.includes(tag) ? 'bg-coffee-accent border-coffee-accent text-white' : 'bg-transparent border-coffee-500 text-coffee-300'"
                            class="px-4 py-1.5 rounded-full border text-xs transition-all">
                            {{ tag }}
                        </button>
                        <!-- Add New Tag (Simple Text Input trigger) -->
                        <button @click="openTagInput" class="px-4 py-1.5 rounded-full border border-dashed border-coffee-400 text-coffee-accent text-xs flex items-center gap-1 hover:bg-white/5">
                            <i class="fa-solid fa-plus"></i> 新增
                        </button>
                    </div>
                    <!-- Hidden Mini Input for new tag -->
                    <div v-if="showTagInput" class="mt-2 flex gap-2">
                        <input v-model="newTagTemp" placeholder="輸入新標籤..." class="flex-1 px-3 py-1.5 rounded custom-input text-xs">
                        <button @click="addNewTag" class="px-3 py-1 bg-coffee-accent text-white rounded text-xs">OK</button>
                    </div>
                </div>

            </div>

            <!-- Footer Actions -->
            <div class="mt-8 flex gap-4">
                <button @click="showModal = false" class="flex-1 py-3 text-coffee-300 hover:text-white text-sm font-bold">取消</button>
                <button @click="saveKol" class="flex-[2] py-3 rounded-xl bg-coffee-accent text-white font-bold text-sm shadow-glow hover:bg-[#D88D5E] transition-colors">
                    儲存資料
                </button>
            </div>
            
            <p v-if="saveStatus" class="text-center text-xs mt-2 text-green-400">{{ saveStatus }}</p>
        </div>
    </div>

</div>

<script>
    const { createApp } = Vue;

    createApp({
        data() {
            return {
                isDark: true, // Default Dark based on screenshot style
                currentView: 'list',
                showModal: false,
                isEditing: false,
                saveStatus: '',
                isFilterExpanded: false, // Filter collapse state
                
                // Data
                kols: [],
                allTags: ['美妝', '旅遊', '美食', '3C', '親子'],
                
                // Filter
                activeFilters: [],
                
                // Search
                searchQuery: '',
                searchPlatform: 'IG',
                platformOptions: ['IG', 'FB', '小紅書', '抖音', '部落格', 'YT'],
                searchResults: [],

                // Form
                showTagInput: false,
                newTagTemp: '',
                form: {
                    id: null,
                    name: '',
                    mainLink: '',
                    mainPlatform: '', // Display only
                    tier: '初級 (1k-3k)',
                    tags: [],
                    platforms: [], // Stores structured objects
                    avatar: ''
                },
                
                // GAS URL (Replace with yours)
                gasUrl:’ https://script.google.com/macros/s/AKfycbx1MEULEAnKVhUK8Thfb1BJKIocQlG_eBKqsbeWhu3nMugpKv6t9K1nFYicNcycUfTP-g/exec' 
            }
        },
        computed: {
            filteredKols() {
                if (this.activeFilters.length === 0) return this.kols;
                return this.kols.filter(kol => 
                    kol.tags.some(tag => this.activeFilters.includes(tag))
                );
            }
        },
        mounted() {
            const stored = localStorage.getItem('kol_app_data_v2');
            if (stored) {
                this.kols = JSON.parse(stored);
                // Extract tags from existing data to ensure list is up to date
                const tagSet = new Set(this.allTags);
                this.kols.forEach(k => k.tags.forEach(t => tagSet.add(t)));
                this.allTags = Array.from(tagSet);
            }
            // Force Dark Mode initially for that "Premium" look
            document.documentElement.classList.add('dark');
        },
        methods: {
            toggleDarkMode() {
                this.isDark = !this.isDark;
                if (this.isDark) document.documentElement.classList.add('dark');
                else document.documentElement.classList.remove('dark');
            },
            toggleFilter(tag) {
                if (tag === '全部') {
                    this.activeFilters = [];
                } else {
                    if (this.activeFilters.includes(tag)) {
                        this.activeFilters = this.activeFilters.filter(t => t !== tag);
                    } else {
                        this.activeFilters.push(tag);
                    }
                }
            },
            
            // --- Modal & Form ---
            openModal() {
                this.isEditing = false;
                this.form = { id: Date.now(), name: '', mainLink: '', mainPlatform: '', tier: '初級 (1k-3k)', tags: [], platforms: [], avatar: '' };
                this.showModal = true;
                this.saveStatus = '';
                this.showTagInput = false;
            },
            editKol(kol) {
                this.isEditing = true;
                this.form = JSON.parse(JSON.stringify(kol));
                this.showModal = true;
                this.saveStatus = '';
            },
            toggleFormTag(tag) {
                if (this.form.tags.includes(tag)) {
                    this.form.tags = this.form.tags.filter(t => t !== tag);
                } else {
                    this.form.tags.push(tag);
                }
            },
            openTagInput() {
                this.showTagInput = true;
            },
            addNewTag() {
                if(this.newTagTemp) {
                    if(!this.allTags.includes(this.newTagTemp)) this.allTags.push(this.newTagTemp);
                    if(!this.form.tags.includes(this.newTagTemp)) this.form.tags.push(this.newTagTemp);
                    this.newTagTemp = '';
                    this.showTagInput = false;
                }
            },
            
            // --- Auto Fill / Platform Logic ---
            autoFillInfo() {
                const url = this.form.mainLink;
                if(!url) return;

                let platName = '其他';
                if (url.includes('instagram.com')) platName = 'IG';
                else if (url.includes('facebook.com')) platName = 'FB';
                else if (url.includes('youtube.com')) platName = 'YT';
                else if (url.includes('tiktok.com')) platName = '抖音';
                else if (url.includes('xiaohongshu')) platName = '小紅書';

                this.form.mainPlatform = platName;

                // Simulate "AI" Name Extraction
                if(!this.form.name && url.length > 10) {
                     const parts = url.split('/');
                     // simple logic to grab last part of url
                     const handle = parts[parts.length-1] || parts[parts.length-2];
                     if(handle) this.form.name = handle.replace(/\?.*$/, ''); 
                }

                // Update Platform List logic
                const existingIdx = this.form.platforms.findIndex(p => p.url === url);
                if (existingIdx === -1) {
                    // Make sure main platform is first or handled
                    this.form.platforms.unshift({ name: platName, url: url });
                } else {
                    this.form.platforms[existingIdx].name = platName;
                }
            },
            
            getPlatformIcon(name) {
                const map = {
                    'IG': 'fa-brands fa-instagram',
                    'FB': 'fa-brands fa-facebook',
                    'YT': 'fa-brands fa-youtube',
                    '抖音': 'fa-brands fa-tiktok',
                    '小紅書': 'fa-solid fa-book', 
                    '部落格': 'fa-solid fa-pen-nib'
                };
                return map[name] || 'fa-solid fa-link';
            },
            getPlatformColor(name) {
                 const map = {
                    'IG': 'text-pink-500',
                    'FB': 'text-blue-500',
                    'YT': 'text-red-500',
                    '抖音': 'text-white',
                    '小紅書': 'text-red-400',
                    '部落格': 'text-green-500'
                };
                return map[name] || 'text-gray-400';
            },

            // --- CRUD ---
            saveKol() {
                if (!this.form.name) return alert('請輸入名稱');
                
                // Ensure main platform is set
                if (!this.form.mainPlatform && this.form.platforms.length > 0) {
                    this.form.mainPlatform = this.form.platforms[0].name;
                }

                if (this.isEditing) {
                    const index = this.kols.findIndex(k => k.id === this.form.id);
                    if (index !== -1) this.kols[index] = this.form;
                } else {
                    this.kols.push(this.form);
                }
                
                this.saveToLocalStorage();
                this.syncToGoogleSheet(this.form);
                this.showModal = false;
            },
            deleteKol(id) {
                if(confirm('確定刪除此資料？')) {
                    this.kols = this.kols.filter(k => k.id !== id);
                    this.saveToLocalStorage();
                }
            },
            saveToLocalStorage() {
                localStorage.setItem('kol_app_data_v2', JSON.stringify(this.kols));
            },
            
            syncToGoogleSheet(data) {
                 if(this.gasUrl.includes('YOUR_GOOGLE')) return; // skip if not set
                 
                 this.saveStatus = '同步中...';
                 const payload = {
                    name: data.name,
                    tier: data.tier,
                    tags: data.tags.join(', '),
                    mainLink: data.mainLink,
                    platforms: JSON.stringify(data.platforms)
                };

                fetch(this.gasUrl, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                }).then(() => {
                    this.saveStatus = '已同步';
                });
            },

            // --- Search ---
            performSearch() {
                if (!this.searchQuery) return;
                this.searchResults = [];
                const mockNames = ['Alice Life', 'Foodie TW', 'Travel Bob', 'Beauty Jen', 'Tech Mike'];
                const mockImages = [
                    'https://i.pravatar.cc/150?img=1', 'https://i.pravatar.cc/150?img=5', 
                    'https://i.pravatar.cc/150?img=8', 'https://i.pravatar.cc/150?img=9',
                    'https://i.pravatar.cc/150?img=11'
                ];

                for(let i=0; i<6; i++) {
                    const rand = Math.floor(Math.random() * 100);
                    let url = '#';
                    const q = this.searchQuery;
                    if(this.searchPlatform === 'IG') url = `https://www.instagram.com/explore/tags/${q}/`;
                    else url = `https://www.google.com/search?q=${this.searchPlatform}+${q}`;

                    this.searchResults.push({
                        id: Date.now() + i,
                        name: `${mockNames[i%5]} ${rand}`,
                        category: q,
                        avatar: mockImages[i%5],
                        url: url
                    });
                }
            }
        }
    }).mount('#app')
</script>
</body>
</html>